<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Paws in the Cosmos</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
  font-family: 'Orbitron', sans-serif;
  color: white;
}
canvas {
  display: block;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<script>
// ================== CANVAS ==================
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

// ================== GAME STATE ==================
let state = "menu";
let lastTime = 0;
let score = 0;
let highScore = 0;

// ================== PLAYER ==================
const player = {
  x: canvas.width / 2,
  y: canvas.height - 120,
  r: 22,
  speed: 420
};

// ================== INPUT ==================
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// ================== STARS ==================
const stars = Array.from({ length: 150 }, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  s: 40 + Math.random() * 80,
  size: Math.random() * 2
}));

// ================== PLANETS ==================
let planets = [];
function spawnPlanet() {
  planets.push({
    x: Math.random() * canvas.width,
    y: -60,
    r: 18 + Math.random() * 18,
    s: 200 + Math.random() * 200
  });
}
setInterval(() => {
  if (state === "playing") spawnPlanet();
}, 900);

// ================== COLLISION ==================
function collide(a, b) {
  const dx = a.x - b.x;
  const dy = a.y - b.y;
  return Math.sqrt(dx * dx + dy * dy) < a.r + b.r;
}

// ================== DRAW PAW ==================
function drawPaw(x, y, r) {
  ctx.shadowBlur = 15;
  ctx.shadowColor = "#00ffff";
  ctx.fillStyle = "#66ffff";

  // Main pad
  ctx.beginPath();
  ctx.ellipse(x, y, r, r * 0.65, 0, 0, Math.PI * 2);
  ctx.fill();

  // Toes
  const toes = [
    [-r * 0.7, -r * 0.9],
    [0, -r * 1.1],
    [r * 0.7, -r * 0.9],
    [-r * 0.35, -r * 0.35]
  ];
  toes.forEach(t => {
    ctx.beginPath();
    ctx.ellipse(x + t[0], y + t[1], r * 0.35, r * 0.35, 0, 0, Math.PI * 2);
    ctx.fill();
  });

  ctx.shadowBlur = 0;
}

// ================== START GAME ==================
function startGame() {
  state = "playing";
  score = 0;
  planets = [];
  player.x = canvas.width / 2;
  player.y = canvas.height - 120;
}

// ================== GAME LOOP ==================
function loop(time) {
  const dt = (time - lastTime) / 1000;
  lastTime = time;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Stars
  ctx.fillStyle = "white";
  stars.forEach(s => {
    s.y += s.s * dt;
    if (s.y > canvas.height) s.y = 0;
    ctx.fillRect(s.x, s.y, s.size, s.size);
  });

  if (state === "menu") {
    ctx.textAlign = "center";
    ctx.font = "48px Orbitron";
    ctx.fillText("PAWS IN THE COSMOS", canvas.width / 2, canvas.height / 2 - 40);
    ctx.font = "22px Orbitron";
    ctx.fillText("Tap Anywhere to Start", canvas.width / 2, canvas.height / 2 + 20);
  }

  if (state === "playing") {
    // Movement
    if (keys.ArrowLeft) player.x -= player.speed * dt;
    if (keys.ArrowRight) player.x += player.speed * dt;
    if (keys.ArrowUp) player.y -= player.speed * dt;
    if (keys.ArrowDown) player.y += player.speed * dt;

    // Bounds
    player.x = Math.max(player.r, Math.min(canvas.width - player.r, player.x));
    player.y = Math.max(player.r, Math.min(canvas.height - player.r, player.y));

    // Planets
    planets.forEach(p => {
      p.y += p.s * dt;

      const g = ctx.createRadialGradient(p.x, p.y, 2, p.x, p.y, p.r);
      g.addColorStop(0, "#ffcc88");
      g.addColorStop(1, "#663300");
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();

      if (collide(player, p)) {
        state = "gameover";
      }
    });

    // Player
    drawPaw(player.x, player.y, player.r);

    // Score
    score += dt * 10;
    if (score > highScore) highScore = score;

    ctx.textAlign = "left";
    ctx.font = "18px Orbitron";
    ctx.fillStyle = "white";
    ctx.fillText("Score: " + Math.floor(score), 20, 30);
    ctx.fillText("High: " + Math.floor(highScore), 20, 55);
  }

  if (state === "gameover") {
    ctx.fillStyle = "rgba(0,0,0,0.6)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.textAlign = "center";
    ctx.fillStyle = "white";
    ctx.font = "46px Orbitron";
    ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 40);
    ctx.font = "22px Orbitron";
    ctx.fillText("Score: " + Math.floor(score), canvas.width / 2, canvas.height / 2 + 5);
    ctx.fillText("Tap Anywhere to Restart", canvas.width / 2, canvas.height / 2 + 45);
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// ================== CONTROLS ==================
window.addEventListener("keydown", e => {
  if (e.key === "Enter" && (state === "menu" || state === "gameover")) {
    startGame();
  }
});

// ðŸ”¥ MOBILE FIX â€” TAP ANYWHERE
document.body.addEventListener("touchstart", () => {
  if (state === "menu" || state === "gameover") startGame();
});
document.body.addEventListener("click", () => {
  if (state === "menu" || state === "gameover") startGame();
});
</script>

</body>
</html>
